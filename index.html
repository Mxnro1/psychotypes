<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ü—Å–∏—Ö–æ—Ç–∏–ø—ã ‚Äî HR-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f7;
      color: #111827;
    }
    header {
      padding: 16px 24px;
      background: #111827;
      color: #f9fafb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      font-size: 18px;
      margin: 0;
    }
    main {
      max-width: 1100px;
      margin: 24px auto 40px;
      padding: 0 16px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .card {
      background: #ffffff;
      border-radius: 14px;
      padding: 16px 18px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.04);
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
      border: 1px solid #e5e7eb;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 28px rgba(0,0,0,0.06);
      background: #f9fafb;
    }
    .card h2 {
      font-size: 16px;
      margin: 0 0 6px;
    }
    .card p {
      margin: 0;
      font-size: 13px;
      color: #4b5563;
    }
    .section {
      display: none;
      background: #ffffff;
      border-radius: 16px;
      padding: 18px 18px 20px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.05);
      border: 1px solid #e5e7eb;
    }
    .section.active { display: block; }
    .section h2 {
      margin-top: 0;
      font-size: 18px;
    }
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #4b5563;
      cursor: pointer;
      margin-bottom: 10px;
    }
    .back-btn span {
      display: inline-block;
      transform: translateY(0.5px);
    }
    label {
      display: block;
      font-size: 13px;
      margin: 10px 0 4px;
      color: #374151;
    }
    select, textarea, input[type="text"], input[type="number"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font: inherit;
      resize: vertical;
    }
    textarea { min-height: 120px; }
    button {
      margin-top: 12px;
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      background: #111827;
      color: #f9fafb;
    }
    button.secondary {
      background: #e5e7eb;
      color: #111827;
    }
    .result-block {
      margin-top: 16px;
      padding: 12px 14px;
      border-radius: 12px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      font-size: 13px;
    }
    .pill {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 999px;
      background: #e5e7eb;
      font-size: 11px;
      margin-right: 4px;
      margin-bottom: 4px;
    }
    .muted {
      font-size: 12px;
      color: #6b7280;
      margin-top: 8px;
    }
    .two-cols {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 12px;
    }
    @media (max-width: 720px) {
      .two-cols {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    ul { padding-left: 18px; }
    ul li { font-size: 13px; margin-bottom: 4px; }
  </style>
</head>
<body>
<header>
  <h1>–ü—Å–∏—Ö–æ—Ç–∏–ø—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h1>
  <div style="font-size:12px;color:#9ca3af;">–ß–µ—Ä–Ω–æ–≤–æ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø ¬∑ –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞</div>
</header>

<main>
  <!-- –ì–ª–∞–≤–Ω–∞—è —Å–µ—Ç–∫–∞ -->
  <div id="home">
    <div class="grid">
      <div class="card" onclick="openSection('types')">
        <h2>üìö –ü—Å–∏—Ö–æ—Ç–∏–ø—ã –∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è</h2>
        <p>–í–≤–µ–¥–∏ —Ä–∞–¥–∏–∫–∞–ª—ã ‚Äî –ø–æ–ª—É—á–∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É –∏ —Å–≤–æ–¥–∫—É –ø–æ –ø—Å–∏—Ö–æ—Ç–∏–ø—É.</p>
      </div>
      <div class="card" onclick="openSection('test')">
        <h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Å–∏—Ö–æ—Ç–∏–ø–æ–≤</h2>
        <p>–ó–∞–ø–æ–ª–Ω–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ —à–∫–∞–ª–µ ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Å—á–∏—Ç–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å.</p>
      </div>
      <div class="card" onclick="openSection('interpret')">
        <h2>üí¨ –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é</h2>
        <p>–û–ø–∏—à–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –ø–æ–ª—É—á–∏ –ø—Ä–∏–º–µ—Ä–Ω—ã–π –ø—Å–∏—Ö–æ—Ç–∏–ø.</p>
      </div>
      <div class="card" onclick="openSection('role')">
        <h2>üéØ –ü–æ–¥–±–æ—Ä —Ä–æ–ª–∏ / –¥–æ–ª–∂–Ω–æ—Å—Ç–∏</h2>
        <p>–ü–æ –ø—Å–∏—Ö–æ—Ç–∏–ø—É –ø–æ–¥–±–µ—Ä—ë–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–æ–Ω—ã –∏ —Ä–æ–ª–∏ –≤ –∫–æ–º–ø–∞–Ω–∏–∏.</p>
      </div>
    </div>
  </div>

  <!-- –ë–ª–æ–∫ 1: –ü—Å–∏—Ö–æ—Ç–∏–ø—ã –∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è -->
  <section id="section-types" class="section">
    <div class="back-btn" onclick="goHome()">
      <span>‚Üê</span><span>–ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</span>
    </div>
    <h2>–ü—Å–∏—Ö–æ—Ç–∏–ø—ã –∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è</h2>
    <p class="muted">–í–≤–µ–¥–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–¥–∏–∫–∞–ª—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É. –ù–∞–∑–≤–∞–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–ø–∏–ª–∏—Ç—å –ø–æ–¥ —Ç–≤–æ—é –º–æ–¥–µ–ª—å.</p>
    <div class="two-cols">
      <div>
        <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–¥–∏–∫–∞–ª</label>
        <select id="types-main">
          <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
        </select>
        <label>–í—Ç–æ—Ä–æ–π —Ä–∞–¥–∏–∫–∞–ª</label>
        <select id="types-second">
          <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
        </select>
        <label>–¢—Ä–µ—Ç–∏–π —Ä–∞–¥–∏–∫–∞–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <select id="types-third">
          <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
        </select>
        <button onclick="showTypeCombo()">–ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–¥–∫—É</button>
      </div>
      <div id="types-result" class="result-block" style="display:none;"></div>
    </div>
  </section>

  <!-- –ë–ª–æ–∫ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫–∞—Ä–∫–∞—Å) -->
  <section id="section-test" class="section">
    <div class="back-btn" onclick="goHome()">
      <span>‚Üê</span><span>–ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</span>
    </div>
    <h2>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Å–∏—Ö–æ—Ç–∏–ø–æ–≤</h2>
    <p class="muted">–ß–µ—Ä–Ω–æ–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º —Å—é–¥–∞ –¥–æ–±–∞–≤–∏–º –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Ñ–æ—Ä–º—É–ª—É. –ü–æ–∫–∞ ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.</p>
    <div>
      <label>–ò–º—è / –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞</label>
      <input type="text" id="test-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω, –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º" />

      <!-- –ü—Ä–∏–º–µ—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤-—à–∫–∞–ª–∞ -->
      <label>–ù–∞—Å–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ —ç–º–æ—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ —Ä–∞–±–æ—Ç–µ?</label>
      <input type="range" id="q1" min="1" max="5" value="3" />
      <div class="muted">1 ‚Äî –≤–æ–æ–±—â–µ –Ω–µ —ç–º–æ—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç / 5 ‚Äî —Å–∏–ª—å–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç</div>

      <label>–ù–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—ë–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –¥—Ä—É–≥–∏–º?</label>
      <input type="range" id="q2" min="1" max="5" value="3" />
      <div class="muted">1 ‚Äî –º—è–≥–∫–∏–π, ¬´–ø–ª—ã–≤—ë—Ç¬ª / 5 ‚Äî –∂—ë—Å—Ç–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç</div>

      <label>–ù–∞—Å–∫–æ–ª—å–∫–æ –ª—é–±–∏—Ç –æ–±—â–µ–Ω–∏–µ –∏ –¥–≤–∏–∂?</label>
      <input type="range" id="q3" min="1" max="5" value="3" />
      <div class="muted">1 ‚Äî –∏–∑–±–µ–≥–∞–µ—Ç –æ–±—â–µ–Ω–∏—è / 5 ‚Äî –≤—Å–µ–≥–¥–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –¥–≤–∏–∂–∞</div>

      <button onclick="runTestStub()">–ü–æ—Å—á–∏—Ç–∞—Ç—å (—á–µ—Ä–Ω–æ–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç)</button>
      <div id="test-result" class="result-block" style="display:none;"></div>
      <p class="muted">–ò—Å—Ç–æ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º —ç–∫—Å–ø–æ—Ä—Ç / —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ.</p>
    </div>
  </section>

  <!-- –ë–ª–æ–∫ 3: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è -->
  <section id="section-interpret" class="section">
    <div class="back-btn" onclick="goHome()">
      <span>‚Üê</span><span>–ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</span>
    </div>
    <h2>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –ø–æ–≤–µ–¥–µ–Ω–∏—è</h2>
    <p class="muted">
      –û–ø–∏—à–∏, –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫ –≤–µ–¥—ë—Ç —Å–µ–±—è –≤ —Ä–∞–±–æ—Ç–µ: –∫–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫—Ä–∏—Ç–∏–∫—É, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –¥–µ–¥–ª–∞–π–Ω—ã, –ª—é–¥–µ–π, –ø–æ—Ä—è–¥–æ–∫.
      –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º –æ—Ü–µ–Ω–∏—Ç, –∫–∞–∫–∏–µ —Ä–∞–¥–∏–∫–∞–ª—ã –≤–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ.
    </p>
    <label>–ò–º—è / –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ</label>
    <input type="text" id="interp-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–∞—à–∞, —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞" />

    <label>–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è (3‚Äì10 —Ñ—Ä–∞–∑)</label>
    <textarea id="interp-text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–ø–æ–∫–æ–π–Ω—ã–π, –Ω–æ –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –º–æ–∂–µ—Ç –¥–∞–≤–∏—Ç—å. –õ—é–±–∏—Ç –ø–æ—Ä—è–¥–æ–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å. –ë—ã—Å—Ç—Ä–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è, –Ω–µ –≤—Å–µ–≥–¥–∞ –≤–Ω–∏–∫–∞—è –≤ –¥–µ—Ç–∞–ª–∏..."></textarea>

    <button onclick="runInterpretation()">–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é</button>

    <div id="interp-result" class="result-block" style="display:none;"></div>
  </section>

  <!-- –ë–ª–æ–∫ 4: –ü–æ–¥–±–æ—Ä —Ä–æ–ª–∏ / –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ -->
  <section id="section-role" class="section">
    <div class="back-btn" onclick="goHome()">
      <span>‚Üê</span><span>–ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</span>
    </div>
    <h2>–ü–æ–¥–±–æ—Ä —Ä–æ–ª–∏ / –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –ø–æ –ø—Å–∏—Ö–æ—Ç–∏–ø—É</h2>
    <p class="muted">
      –í–≤–µ–¥–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–¥–∏–∫–∞–ª—ã ‚Äî –ø–æ–ª—É—á–∏—à—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∏ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π.
      –õ–æ–≥–∏–∫–∞ –ø–æ–∫–∞ –±–∞–∑–æ–≤–∞—è, –µ—ë –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–¥ —Ç–≤–æ–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏.
    </p>
    <div class="two-cols">
      <div>
        <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–¥–∏–∫–∞–ª</label>
        <select id="role-main">
          <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
        </select>
        <label>–í—Ç–æ—Ä–æ–π —Ä–∞–¥–∏–∫–∞–ª</label>
        <select id="role-second">
          <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
        </select>
        <label>–¢—Ä–µ—Ç–∏–π —Ä–∞–¥–∏–∫–∞–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <select id="role-third">
          <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
        </select>
        <button onclick="runRolePicker()">–ü–æ–¥–æ–±—Ä–∞—Ç—å —Ä–æ–ª—å</button>
      </div>
      <div id="role-result" class="result-block" style="display:none;"></div>
    </div>
  </section>
</main>

<script>
  // --- –ë–ê–ó–û–í–ê–Ø –ú–û–î–ï–õ–¨ –ü–°–ò–•–û–¢–ò–ü–û–í ---
  // ID –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ü–∏—Ñ—Ä–∞–º–∏ (1‚Äì7), –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–¥—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∂–µ –ø–æ–¥ —Ç–≤–æ—é —Å–∏—Å—Ç–µ–º—É
  const PSYCHOTYPES = {
    "1": {
      id: "1",
      name: "–ì–∏–ø–µ—Ä—Ç–∏–º",
      short: "–ë—ã—Å—Ç—Ä—ã–π, —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π, –æ–±—â–∏—Ç–µ–ª—å–Ω—ã–π, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω—ã–π.",
      strengths: [
        "–õ–µ–≥–∫–æ –∑–∞–∂–∏–≥–∞–µ—Ç –ª—é–¥–µ–π –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤",
        "–ë–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É",
        "–ù–µ –±–æ–∏—Ç—Å—è –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏"
      ],
      risks: [
        "–•–∞–æ—Ç–∏—á–Ω–æ—Å—Ç—å, –ø—Ä–æ–≤–∞–ª—ã –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ",
        "–ú–æ–∂–µ—Ç –Ω–µ –¥–æ–¥–µ–ª—ã–≤–∞—Ç—å –¥–æ –∫–æ–Ω—Ü–∞",
        "–°–ª–∞–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞–º"
      ],
      goodRoles: [
        "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ª–∏–¥–æ–≤",
        "–ê–º–±–∞—Å—Å–∞–¥–æ—Ä / –±—Ä–µ–Ω–¥-–µ–≤–∞–Ω–≥–µ–ª–∏—Å—Ç",
        "–§—Ä–æ–Ω—Ç–æ–≤–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º"
      ],
      badRoles: [
        "–†—É—Ç–∏–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç",
        "–ì–ª—É–±–æ–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
        "–ü–æ–∑–∏—Ü–∏—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π"
      ]
    },
    "2": {
      id: "2",
      name: "–≠–º–æ—Ç–∏–≤",
      short: "–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π, —Å–æ–ø–µ—Ä–µ–∂–∏–≤–∞—é—â–∏–π, —á–µ–ª–æ–≤–µ–∫–æ–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π.",
      strengths: [
        "–ö–ª–∏–µ–Ω—Ç–æ–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ ¬´–ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏¬ª",
        "–£–º–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å",
        "–°–æ–∑–¥–∞—ë—Ç —Ç—ë–ø–ª—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É"
      ],
      risks: [
        "–í—ã–≥–æ—Ä–∞–µ—Ç –æ—Ç —á—É–∂–∏—Ö –ø—Ä–æ–±–ª–µ–º",
        "–ú–æ–∂–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –∂—ë—Å—Ç–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π",
        "–¢—è–∂–µ–ª–æ –¥–µ—Ä–∂–∞—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã"
      ],
      goodRoles: [
        "–ö—É—Ä–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–æ–≤",
        "–°–ª—É–∂–±–∞ –∑–∞–±–æ—Ç—ã / –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
        "HR, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, –æ–Ω–±–æ—Ä–¥–∏–Ω–≥"
      ],
      badRoles: [
        "–ñ—ë—Å—Ç–∫–∏–π —Å–∏–ª–æ–≤–æ–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç",
        "–†–æ–ª–∏, –≥–¥–µ –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ ¬´—Ä—É–±–∏—Ç—å –ø–æ –∂–∏–≤–æ–º—É¬ª"
      ]
    },
    "3": {
      id: "3",
      name: "–≠–ø–∏–ª–µ–ø—Ç–æ–∏–¥",
      short: "–°—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–æ—Ä—è–¥–æ–∫, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–µ—Ç–∞–ª–µ–π.",
      strengths: [
        "–û—Ç–ª–∏—á–Ω–æ –¥–µ—Ä–∂–∏—Ç —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã",
        "–í–∏–¥–∏—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏ –¥—ã—Ä—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö",
        "–ù–∞–¥—ë–∂–µ–Ω –≤ —Ä—É—Ç–∏–Ω–µ –∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è—Ö"
      ],
      risks: [
        "–ñ—ë—Å—Ç–∫–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏",
        "–ù–µ –ª—é–±–∏—Ç —Ö–∞–æ—Å –∏ —á–∞—Å—Ç—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã",
        "–°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –º–∏–∫—Ä–æ–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É"
      ],
      goodRoles: [
        "–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä",
        "–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ / —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–≤",
        "–ë—ç–∫-–æ—Ñ–∏—Å, –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç"
      ],
      badRoles: [
        "–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ —Ö–∞–æ—Ç–∏—á–Ω—ã–µ —Ä–æ–ª–∏",
        "–°—Ç–∞—Ä—Ç–∞–ø–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –±–µ–∑ –ø—Ä–∞–≤–∏–ª"
      ]
    },
    "4": {
      id: "4",
      name: "–®–∏–∑–æ–∏–¥",
      short: "–ó–∞–∫—Ä—ã—Ç—ã–π, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π, –ª—é–±–∏—Ç —É–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏.",
      strengths: [
        "–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ —Ç–µ–º—É",
        "–ù–µ –±–æ–∏—Ç—Å—è —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á",
        "–ú–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è"
      ],
      risks: [
        "–°–ª–∞–±–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è",
        "–ù–µ –≤—Å–µ–≥–¥–∞ —á–∏—Ç–∞–µ—Ç —ç–º–æ—Ü–∏–∏ –ª—é–¥–µ–π",
        "–ú–æ–∂–µ—Ç –≤—ã–ø–∞–¥–∞—Ç—å –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏"
      ],
      goodRoles: [
        "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞",
        "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
        "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —Å–ª–æ–∂–Ω—ã–µ –∫–µ–π—Å—ã"
      ],
      badRoles: [
        "–§—Ä–æ–Ω—Ç–æ–≤—ã–µ –ø—Ä–æ–¥–∞–∂–∏",
        "–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –ª–∏—Ü–æ–º –∫ –ª–∏—Ü—É"
      ]
    },
    "5": {
      id: "5",
      name: "–ò—Å—Ç–µ—Ä–æ–∏–¥",
      short: "–Ø—Ä–∫–∏–π, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π, –ª—é–±–∏—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∏ —Å—Ü–µ–Ω—ã.",
      strengths: [
        "–Ø—Ä–∫–∞—è –ø–æ–¥–∞—á–∞, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏",
        "–£–º–µ–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ",
        "–ú–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã"
      ],
      risks: [
        "–§–æ–∫—É—Å –Ω–∞ —Å–µ–±–µ, –∞ –Ω–µ –Ω–∞ –∑–∞–¥–∞—á–µ",
        "–ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –¥—Ä–∞–º—É",
        "–°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å ¬´—Ç–∏—Ö–æ–π¬ª —Ä—É—Ç–∏–Ω–æ–π"
      ],
      goodRoles: [
        "–ü—É–±–ª–∏—á–Ω—ã–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è",
        "–õ–∏—Ü–æ –±—Ä–µ–Ω–¥–∞, –º–µ–¥–∏–∞",
        "Event, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, —à–æ—É–∫–µ–π—Å—ã"
      ],
      badRoles: [
        "–¢–∏—Ö–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
        "–ù–µ–≤–∏–¥–∏–º–∞—è —Ä—É—Ç–∏–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞"
      ]
    },
    "6": {
      id: "6",
      name: "–¢—Ä–µ–≤–æ–∂–Ω—ã–π / –∞—Å—Ç–µ–Ω–∏—á–µ—Å–∫–∏–π",
      short: "–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π, –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π, –ø–µ—Ä–µ–∂–∏–≤–∞—é—â–∏–π –∑–∞—Ä–∞–Ω–µ–µ.",
      strengths: [
        "–í–∏–¥–∏—Ç —Ä–∏—Å–∫–∏ –∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞",
        "–í–Ω–∏–º–∞—Ç–µ–ª–µ–Ω –∫ –¥–µ—Ç–∞–ª—è–º",
        "–ù–µ –¥–µ–ª–∞–µ—Ç —Ä–µ–∑–∫–∏—Ö –∏ –Ω–µ–æ–±–¥—É–º–∞–Ω–Ω—ã—Ö —à–∞–≥–æ–≤"
      ],
      risks: [
        "–ú–æ–∂–µ—Ç –¥–æ–ª–≥–æ —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è",
        "–°–ª–æ–∂–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è",
        "–°–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ —Å–∞–º–æ–∫–æ–ø–∞–Ω–∏—é"
      ],
      goodRoles: [
        "–ö–æ–Ω—Ç—Ä–æ–ª—å –æ—à–∏–±–æ–∫",
        "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–æ–º–ø–ª–∞–µ–Ω—Å",
        "–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç—å"
      ],
      badRoles: [
        "–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏",
        "–°–∏—Ç—É–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞ –∏ —Ö–∞–æ—Å–∞"
      ]
    },
    "7": {
      id: "7",
      name: "–ü–∞—Ä–∞–Ω–æ–π—è–ª",
      short: "–¶–µ–ª—å, –∫–æ–Ω—Ç—Ä–æ–ª—å, —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–∏–ª–æ–≤–æ–π —Å—Ç–∏–ª—å.",
      strengths: [
        "–£–º–µ–µ—Ç –¥–æ–∂–∏–º–∞—Ç—å –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞",
        "–ë–µ—Ä—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å",
        "–í—ã—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∂—ë—Å—Ç–∫—É—é —Å–∏—Å—Ç–µ–º—É"
      ],
      risks: [
        "–ö–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ",
        "–ú–æ–∂–µ—Ç –≤—ã–∂–∏–≥–∞—Ç—å –ª—é–¥–µ–π",
        "–°–ª–æ–∂–Ω–æ –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏"
      ],
      goodRoles: [
        "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
        "–ö—Ä–∏–∑–∏—Å–Ω—ã–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç",
        "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –≤ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö"
      ],
      badRoles: [
        "–°–ª—É–∂–±–∞ –∑–∞–±–æ—Ç—ã / –º—è–≥–∫–∏–π —Å–µ—Ä–≤–∏—Å",
        "–†–æ–ª–∏, –≥–¥–µ –≤–∞–∂–Ω–∞ —ç–º–ø–∞—Ç–∏—è –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ"
      ]
    }
  };

  // –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏: –ø—Ä–æ—Å—Ç–∞—è –º–æ–¥–µ–ª—å
  // text.toLowerCase() –∏—â–µ–º –≤—Ö–æ–∂–¥–µ–Ω–∏—è.
  const TRIGGERS = [
    // –≠–ú–û–¢–ò–í (2)
    { pattern: "—Å–æ–ø–µ—Ä–µ–∂", weights: { "2": 3 } },
    { pattern: "—Å–æ—á—É–≤—Å—Ç–≤", weights: { "2": 3 } },
    { pattern: "—ç–º–æ—Ü–∏–æ–Ω–∞–ª", weights: { "2": 2 } },
    { pattern: "–ø–µ—Ä–µ–∂–∏–≤–∞", weights: { "2": 2, "6": 1 } },
    { pattern: "–æ—á–µ–Ω—å –¥–æ–±—Ä—ã–π", weights: { "2": 2 } },
    { pattern: "–ª—é–¥—è–º —Ö–æ—Ä–æ—à–æ", weights: { "2": 2 } },

    // –ì–ò–ü–ï–†–¢–ò–ú (1)
    { pattern: "—ç–Ω–µ—Ä–≥–∏—á", weights: { "1": 3 } },
    { pattern: "–∂–∏–≤–æ–π", weights: { "1": 2 } },
    { pattern: "–æ–±—â–∏—Ç–µ–ª", weights: { "1": 3, "2": 1 } },
    { pattern: "–º–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç", weights: { "1": 2 } },
    { pattern: "–±—ã—Å—Ç—Ä–æ –ø—Ä–∏–Ω–∏–º", weights: { "1": 2, "7": 1 } },
    { pattern: "–ª—é–±–∏—Ç –¥–≤–∏–∂", weights: { "1": 3 } },
    { pattern: "–Ω–µ –ª—é–±–∏—Ç —Ä—É—Ç–∏–Ω—É", weights: { "1": 2, "3": -1 } },

    // –ü–ê–†–ê–ù–û–ô–Ø–õ (7)
    { pattern: "–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä", weights: { "7": 3, "3": 1 } },
    { pattern: "–∂–µ—Å—Ç–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª", weights: { "7": 4 } },
    { pattern: "–¥–∞–≤–∏—Ç", weights: { "7": 3 } },
    { pattern: "–ø—Ä–æ–¥–∞–≤–ª–∏–≤–∞–µ—Ç", weights: { "7": 3 } },
    { pattern: "—Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å", weights: { "7": 2, "3": 1 } },
    { pattern: "–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", weights: { "7": 2, "6": 1 } },
    { pattern: "–∏–¥–µ—Ç –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç", weights: { "7": 3 } },

    // –≠–ü–ò–õ–ï–ü–¢–û–ò–î (3)
    { pattern: "–ª—é–±–∏—Ç –ø–æ—Ä—è–¥–æ–∫", weights: { "3": 3 } },
    { pattern: "—Å—Ç—Ä—É–∫—Ç—É—Ä", weights: { "3": 3, "7": 1 } },
    { pattern: "–ø–æ –ø–æ–ª–æ—á–∫–∞–º", weights: { "3": 3 } },
    { pattern: "—Ä–µ–≥–ª–∞–º–µ–Ω—Ç", weights: { "3": 2 } },
    { pattern: "—Ä—É—Ç–∏–Ω", weights: { "3": 2, "1": -1 } },
    { pattern: "–ø–µ–¥–∞–Ω—Ç", weights: { "3": 3 } },

    // –®–ò–ó–û–ò–î (4)
    { pattern: "–∑–∞–º–∫–Ω—É—Ç", weights: { "4": 3, "1": -1 } },
    { pattern: "–∑–∞–∫—Ä—ã—Ç", weights: { "4": 2 } },
    { pattern: "–ª—é–±–∏—Ç –æ–¥–∏–Ω–æ—á", weights: { "4": 3 } },
    { pattern: "–Ω–µ –ª—é–±–∏—Ç –æ–±—â–µ–Ω–∏–µ", weights: { "4": 3, "1": -2 } },
    { pattern: "–≥–ª—É–±–æ–∫–æ –¥—É–º–∞–µ—Ç", weights: { "4": 2 } },
    { pattern: "–∞–Ω–∞–ª–∏—Ç–∏–∫", weights: { "4": 3 } },

    // –ò–°–¢–ï–†–û–ò–î (5)
    { pattern: "–ª—é–±–∏—Ç –≤–Ω–∏–º–∞–Ω–∏–µ", weights: { "5": 3, "1": 1 } },
    { pattern: "—Å—Ü–µ–Ω–∞", weights: { "5": 2 } },
    { pattern: "–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ç–∏–≤", weights: { "5": 3 } },
    { pattern: "–¥—Ä–∞–º–∞", weights: { "5": 2 } },
    { pattern: "–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ", weights: { "5": 2 } },

    // –¢–†–ï–í–û–ñ–ù–´–ô (6)
    { pattern: "–ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –∑–∞—Ä–∞–Ω–µ–µ", weights: { "6": 3 } },
    { pattern: "–±–æ–∏—Ç—Å—è –æ—à–∏–±", weights: { "6": 3 } },
    { pattern: "–æ—Å—Ç–æ—Ä–æ–∂–Ω", weights: { "6": 2 } },
    { pattern: "—Å–æ–º–Ω–µ–≤–∞", weights: { "6": 2 } },
    { pattern: "–º–Ω–∏—Ç–µ–ª–µ–Ω", weights: { "6": 3 } },

    // –∞–Ω—Ç–∏—Å–∏–≥–Ω–∞–ª—ã / –º–∏–Ω—É—Å—ã
    { pattern: "—Ö–æ–ª–æ–¥–Ω—ã–π", weights: { "2": -2 } },
    { pattern: "–Ω–µ—ç–º–æ—Ü–∏–æ–Ω–∞–ª", weights: { "2": -2, "4": 1 } }
  ];

  function openSection(key) {
    document.getElementById("home").style.display = "none";
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    document.getElementById("section-" + key).classList.add("active");
  }

  function goHome() {
    document.getElementById("home").style.display = "block";
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  }

  // –ó–∞–ø–æ–ª–Ω—è–µ–º select'—ã –ø—Å–∏—Ö–æ—Ç–∏–ø–æ–≤
  function fillPsychotypeSelects() {
    const selects = [
      "types-main", "types-second", "types-third",
      "role-main", "role-second", "role-third"
    ];
    selects.forEach(id => {
      const sel = document.getElementById(id);
      if (!sel) return;
      Object.values(PSYCHOTYPES).forEach(pt => {
        const opt = document.createElement("option");
        opt.value = pt.id;
        opt.textContent = pt.id + " ‚Äî " + pt.name;
        sel.appendChild(opt);
      });
    });
  }

  fillPsychotypeSelects();

  // --- –õ–û–ì–ò–ö–ê –ë–õ–û–ö–ê 1 (–ø—Å–∏—Ö–æ—Ç–∏–ø—ã –∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è) ---
  function showTypeCombo() {
    const main = document.getElementById("types-main").value;
    const second = document.getElementById("types-second").value;
    const third = document.getElementById("types-third").value;
    const box = document.getElementById("types-result");

    if (!main) {
      box.style.display = "block";
      box.innerHTML = "<strong>–£–∫–∞–∂–∏ —Ö–æ—Ç—è –±—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–¥–∏–∫–∞–ª.</strong>";
      return;
    }

    const mainType = PSYCHOTYPES[main];
    const secondType = PSYCHOTYPES[second] || null;
    const thirdType = PSYCHOTYPES[third] || null;

    let html = "";
    html += `<div><strong>–û—Å–Ω–æ–≤–Ω–æ–π:</strong> ${mainType.id} ‚Äî ${mainType.name}</div>`;
    if (secondType) {
      html += `<div><strong>–í—Ç–æ—Ä–æ–π:</strong> ${secondType.id} ‚Äî ${secondType.name}</div>`;
    }
    if (thirdType) {
      html += `<div><strong>–¢—Ä–µ—Ç–∏–π:</strong> ${thirdType.id} ‚Äî ${thirdType.name}</div>`;
    }

    html += `<hr style="margin:8px 0;border:none;border-top:1px solid #e5e7eb;">`;
    html += `<div style="font-size:13px;margin-bottom:6px;"><strong>–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –ø–æ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Ç–∏–ø—É:</strong><br>${mainType.short}</div>`;

    if (secondType) {
      html += `<div style="font-size:13px;margin-bottom:6px;"><strong>–î–æ–±–∞–≤–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ —Ä–∞–¥–∏–∫–∞–ª–∞:</strong><br>${secondType.short}</div>`;
    }

    html += `<div style="margin-top:6px;"><strong>–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:</strong><ul>`;
    mainType.strengths.forEach(s => html += `<li>${s}</li>`);
    if (secondType) secondType.strengths.slice(0,2).forEach(s => html += `<li>${s}</li>`);
    html += `</ul></div>`;

    html += `<div><strong>–†–∏—Å–∫–∏:</strong><ul>`;
    mainType.risks.forEach(s => html += `<li>${s}</li>`);
    if (secondType) secondType.risks.slice(0,2).forEach(s => html += `<li>${s}</li>`);
    html += `</ul></div>`;

    box.innerHTML = html;
    box.style.display = "block";
  }

  // --- –õ–û–ì–ò–ö–ê –ë–õ–û–ö–ê 2 (—á–µ—Ä–Ω–æ–≤–æ–π —Ç–µ—Å—Ç) ---
  function runTestStub() {
    const name = document.getElementById("test-name").value || "–°–æ—Ç—Ä—É–¥–Ω–∏–∫";
    const q1 = Number(document.getElementById("q1").value);
    const q2 = Number(document.getElementById("q2").value);
    const q3 = Number(document.getElementById("q3").value);

    // –û—á–µ–Ω—å —É–ø—Ä–æ—â—ë–Ω–Ω–æ: —ç–º–æ—Ü–∏–∏ -> 2, –∫–æ–Ω—Ç—Ä–æ–ª—å -> 7/3, –æ–±—â–µ–Ω–∏–µ -> 1/5
    const scores = { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0 };
    scores["2"] += q1 * 2;
    scores["7"] += q2 * 2;
    scores["3"] += q2;
    scores["1"] += q3 * 2;
    scores["5"] += Math.max(0, q3 - 2);

    const sorted = Object.entries(scores).sort((a,b) => b[1] - a[1]);
    const top = sorted.slice(0,3).filter(([id, s]) => s > 0);
    const box = document.getElementById("test-result");

    if (!top.length) {
      box.style.display = "block";
      box.innerHTML = "–°–ª–∏—à–∫–æ–º –º–∞–ª–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è. –í —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç.";
      return;
    }

    let html = `<div><strong>–ß–µ—Ä–Ω–æ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å: ${name}</strong></div>`;
    html += `<div style="margin:6px 0;">–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ä–∞–¥–∏–∫–∞–ª–æ–≤:</div>`;
    top.forEach(([id, score]) => {
      const t = PSYCHOTYPES[id];
      html += `<div class="pill">${t.id} ‚Äî ${t.name} (${score})</div>`;
    });

    const main = PSYCHOTYPES[top[0][0]];
    html += `<div style="margin-top:8px;font-size:13px;"><strong>–û—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø:</strong> ${main.id} ‚Äî ${main.name}<br>${main.short}</div>`;
    box.innerHTML = html;
    box.style.display = "block";
  }

  // --- –õ–û–ì–ò–ö–ê –ë–õ–û–ö–ê 3 (–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É) ---
  function interpretText(text) {
    const lower = text.toLowerCase();
    const scores = { "1": 0, "2": 0, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0 };

    TRIGGERS.forEach(tr => {
      if (lower.includes(tr.pattern)) {
        for (const [id, w] of Object.entries(tr.weights)) {
          if (!(id in scores)) continue;
          scores[id] += w;
        }
      }
    });

    // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞: –µ—Å–ª–∏ –º–Ω–æ–≥–æ ¬´–∫–æ–Ω—Ç—Ä–æ–ª—è¬ª –∏ –º–∞–ª–æ ¬´—ç–º–ø–∞—Ç–∏–∏¬ª ‚Äì —É—Å–∏–ª–∏–≤–∞–µ–º 7 –ø—Ä–æ—Ç–∏–≤ 2 –∏ —Ç.–ø.
    // (–ü–æ–∫–∞ –æ—Å—Ç–∞–≤–ª—è—é –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å. –ü–æ—Ç–æ–º –º–æ–∂–Ω–æ –¥–æ–∫—Ä—É—Ç–∏—Ç—å —É—Å–ª–æ–≤–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.)

    // –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º: –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ
    Object.keys(scores).forEach(id => {
      if (scores[id] < 0) scores[id] = 0;
    });

    const sorted = Object.entries(scores).sort((a,b) => b[1] - a[1]);
    return sorted;
  }

  function runInterpretation() {
    const name = document.getElementById("interp-name").value || "–°–æ—Ç—Ä—É–¥–Ω–∏–∫";
    const text = document.getElementById("interp-text").value.trim();
    const box = document.getElementById("interp-result");

    if (!text || text.length < 20) {
      box.style.display = "block";
      box.innerHTML = "–î–æ–±–∞–≤—å –ø–æ–±–æ–ª—å—à–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è (–º–∏–Ω–∏–º—É–º 2‚Äì3 —Ñ—Ä–∞–∑—ã).";
      return;
    }

    const sorted = interpretText(text);
    const top = sorted.slice(0,3).filter(([id, score]) => score > 0);

    if (!top.length) {
      box.style.display = "block";
      box.innerHTML = "–ü–æ —ç—Ç–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é –Ω–µ —É–¥–∞–ª–æ—Å—å –≤—ã—Ç–∞—â–∏—Ç—å —è–≤–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã. –ú–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–∑–∂–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å.";
      return;
    }

    let html = `<div><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: ${name}</strong></div>`;
    html += `<div style="margin:6px 0;">–í–µ—Ä–æ—è—Ç–Ω—ã–µ —Ä–∞–¥–∏–∫–∞–ª—ã (–ø–æ –≤–µ—Å–∞–º):</div>`;
    top.forEach(([id, score]) => {
      const t = PSYCHOTYPES[id];
      html += `<div class="pill">${t.id} ‚Äî ${t.name} (${score})</div>`;
    });

    const main = PSYCHOTYPES[top[0][0]];
    html += `<div style="margin-top:8px;font-size:13px;"><strong>–û—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø:</strong> ${main.id} ‚Äî ${main.name}</div>`;
    html += `<div style="font-size:13px;margin-top:4px;">${main.short}</div>`;

    html += `<div style="margin-top:8px;"><strong>–ì–¥–µ —Å–∏–ª—å–Ω—ã–π:</strong><ul>`;
    main.strengths.forEach(s => html += `<li>${s}</li>`);
    html += `</ul></div>`;

    html += `<div><strong>–†–∏—Å–∫–∏:</strong><ul>`;
    main.risks.forEach(s => html += `<li>${s}</li>`);
    html += `</ul></div>`;

    html += `<div class="muted">‚ö†Ô∏è –≠—Ç–æ —á–µ—Ä–Ω–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º —Å–ª–æ–≤. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å –∏ –ø—Ä–∞–≤–∏–ª–∞.</div>`;

    box.innerHTML = html;
    box.style.display = "block";
  }

  // --- –õ–û–ì–ò–ö–ê –ë–õ–û–ö–ê 4 (–ø–æ–¥–±–æ—Ä —Ä–æ–ª–∏) ---
  function runRolePicker() {
    const main = document.getElementById("role-main").value;
    const second = document.getElementById("role-second").value;
    const third = document.getElementById("role-third").value;
    const box = document.getElementById("role-result");

    if (!main) {
      box.style.display = "block";
      box.innerHTML = "–£–∫–∞–∂–∏ —Ö–æ—Ç—è –±—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–¥–∏–∫–∞–ª.";
      return;
    }

    const mainType = PSYCHOTYPES[main];
    const secondType = PSYCHOTYPES[second] || null;
    const thirdType = PSYCHOTYPES[third] || null;

    let good = new Set();
    let bad = new Set();

    mainType.goodRoles.forEach(r => good.add(r));
    mainType.badRoles.forEach(r => bad.add(r));

    if (secondType) {
      secondType.goodRoles.forEach(r => good.add(r));
      secondType.badRoles.forEach(r => bad.add(r));
    }
    if (thirdType) {
      thirdType.goodRoles.forEach(r => good.add(r));
      thirdType.badRoles.forEach(r => bad.add(r));
    }

    // –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã: –µ—Å–ª–∏ —Ä–æ–ª—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ good –∏ bad ‚Äî –ø–æ–º–µ—á–∞–µ–º –µ—ë –∫–∞–∫ —Å–ø–æ—Ä–Ω—É—é
    const goodList = Array.from(good);
    const badList = Array.from(bad);
    const conflict = goodList.filter(r => bad.has(r));

    let html = `<div><strong>–ü–æ–¥–±–æ—Ä —Ä–æ–ª–µ–π –ø–æ –ø—Å–∏—Ö–æ—Ç–∏–ø—É</strong></div>`;
    html += `<div style="margin:6px 0;font-size:13px;">–û—Å–Ω–æ–≤–Ω–æ–π: ${mainType.id} ‚Äî ${mainType.name}</div>`;
    if (secondType) html += `<div style="font-size:13px;">–í—Ç–æ—Ä–æ–π: ${secondType.id} ‚Äî ${secondType.name}</div>`;
    if (thirdType) html += `<div style="font-size:13px;">–¢—Ä–µ—Ç–∏–π: ${thirdType.id} ‚Äî ${thirdType.name}</div>`;

    if (goodList.length) {
      html += `<div style="margin-top:8px;"><strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–æ–ª–∏:</strong><ul>`;
      goodList.forEach(r => {
        const mark = conflict.includes(r) ? " (—Å–ø–æ—Ä–Ω–æ, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)" : "";
        html += `<li>${r}${mark}</li>`;
      });
      html += `</ul></div>`;
    }

    if (badList.length) {
      html += `<div><strong>–†–æ–ª–∏ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º–∏ —Ä–∏—Å–∫–∞–º–∏:</strong><ul>`;
      badList.forEach(r => {
        const mark = conflict.includes(r) ? " (—Å–ø–æ—Ä–Ω–æ, –º–æ–∂–Ω–æ, –Ω–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ)" : "";
        html += `<li>${r}${mark}</li>`;
      });
      html += `</ul></div>`;
    }

    html += `<div class="muted">–î–∞–ª—å—à–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–≤—è–∑–∞—Ç—å —ç—Ç–æ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º –≤ —Ç–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏.</div>`;

    box.innerHTML = html;
    box.style.display = "block";
  }
</script>
</body>
</html>